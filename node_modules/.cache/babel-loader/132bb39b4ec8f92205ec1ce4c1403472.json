{"ast":null,"code":"import _classCallCheck from\"/Users/brianaking/Desktop/cleanify/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/brianaking/Desktop/cleanify/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/brianaking/Desktop/cleanify/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/brianaking/Desktop/cleanify/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/brianaking/Desktop/cleanify/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import profPic from'./profPic.png';import logo from'./logo.png';import Zoom from'react-reveal/Zoom';import Fade from'react-reveal/Fade';import'./App.css';import Playlists from'./components/Playlists';import SpotifyWebApi from'spotify-web-api-js';import ReactGA from'react-ga';var spotifyApi=new SpotifyWebApi();var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);_this=_super.call(this);var params=_this.getHashParams();var token=params.access_token;if(token){spotifyApi.setAccessToken(token);}ReactGA.initialize('UA-172518785-1');ReactGA.pageview(window.location.pathname);_this.state={userId:'',loggedIn:params.access_token?true:false,profPic:'',name:''};_this.login=_this.login.bind(_assertThisInitialized(_this));_this.logout=_this.logout.bind(_assertThisInitialized(_this));return _this;}_createClass(App,[{key:\"getHashParams\",value:function getHashParams(){var hashParams={};var e,r=/([^&;=]+)=?([^&;]*)/g,q=window.location.hash.substring(1);while(e=r.exec(q)){hashParams[e[1]]=decodeURIComponent(e[2]);}return hashParams;}},{key:\"getUserProfile\",value:function getUserProfile(){var _this2=this;spotifyApi.getMe().then(function(response){if(response.images.length===0){_this2.setState({userId:response.id,profPic:profPic,name:response.display_name});}else{_this2.setState({userId:response.id,profPic:response.images[0].url,name:response.display_name});}});}},{key:\"componentDidMount\",value:function componentDidMount(){if(this.state.loggedIn){this.getUserProfile();}}},{key:\"generateRandomString\",value:function generateRandomString(length){var text='';var possible='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';for(var i=0;i<length;i++){text+=possible.charAt(Math.floor(Math.random()*possible.length));}return text;}},{key:\"login\",value:function login(){var stateKey='spotify_auth_state';var client_id='69862027b9b54d9eb6f6dd2ae3ed3050';// Your client id\nvar redirect_uri='https://cleanifyapp.com/';// Your redirect uri\nvar state=this.generateRandomString(16);localStorage.setItem(stateKey,state);var scope='user-read-private user-read-email playlist-read-private playlist-modify-public playlist-modify-private';var url='https://accounts.spotify.com/authorize';url+='?response_type=token';url+='&client_id='+encodeURIComponent(client_id);url+='&scope='+encodeURIComponent(scope);url+='&redirect_uri='+encodeURIComponent(redirect_uri);url+='&state='+encodeURIComponent(state);window.location=url;}},{key:\"logout\",value:function logout(){this.setState({loggedIn:false});return/*#__PURE__*/React.createElement(\"iframe\",{style:\"display: none;\",src:\"https://spotify.com/logout\"});}},{key:\"render\",value:function render(){var userId=this.state.userId;return/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},this.state.loggedIn?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"row profile\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-4 col-sm-4 col-lg-2 col-md-3\"},/*#__PURE__*/React.createElement(\"img\",{src:this.state.profPic,className:\"profPic rounded-circle img-fluid\",alt:\"profile pic\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-8 col-sm-8 col-lg-10 col-md-9 text-left ml-n3\"},/*#__PURE__*/React.createElement(\"button\",{type:\"button\",class:\"btn btn-danger btn-sm mx-0 float-right\",onClick:this.logout},\"Log Out\"),/*#__PURE__*/React.createElement(\"h1\",{className:\"profName\"},this.state.name))),/*#__PURE__*/React.createElement(Playlists,{user:userId})):/*#__PURE__*/React.createElement(\"div\",{id:\"login\",className:\"pt-5\"},/*#__PURE__*/React.createElement(Fade,{top:true},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"img\",{src:logo,class:\"logo img-fluid text-center\",alt:\"logo\"}),/*#__PURE__*/React.createElement(\"h1\",{className:\"logo-title\"},\"Cleanify\"))),/*#__PURE__*/React.createElement(Zoom,{delay:1000},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"button\",{id:\"login-button\",onClick:this.login,class:\"btn btn-success btn-lg\"},\"Log in with Spotify\")))));}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["/Users/brianaking/Desktop/cleanify/client/src/App.js"],"names":["React","Component","profPic","logo","Zoom","Fade","Playlists","SpotifyWebApi","ReactGA","spotifyApi","App","params","getHashParams","token","access_token","setAccessToken","initialize","pageview","window","location","pathname","state","userId","loggedIn","name","login","bind","logout","hashParams","e","r","q","hash","substring","exec","decodeURIComponent","getMe","then","response","images","length","setState","id","display_name","url","getUserProfile","text","possible","i","charAt","Math","floor","random","stateKey","client_id","redirect_uri","generateRandomString","localStorage","setItem","scope","encodeURIComponent"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport profPic from './profPic.png';\nimport logo from './logo.png'\nimport Zoom from 'react-reveal/Zoom';\nimport Fade from 'react-reveal/Fade';\n\nimport './App.css';\nimport Playlists from './components/Playlists'\nimport SpotifyWebApi from 'spotify-web-api-js';\nimport ReactGA from 'react-ga';\n\n\nconst spotifyApi = new SpotifyWebApi();\n\n\nclass App extends Component {\n\nconstructor (){\n  super();\n  const params = this.getHashParams();\n  const token = params.access_token;\n\n  if (token) {\n     spotifyApi.setAccessToken(token);\n  }\n\n    ReactGA.initialize('UA-172518785-1');\n    ReactGA.pageview(window.location.pathname);\n\n  this.state ={\n    userId: '',\n    loggedIn: params.access_token ? true : false,\n    profPic: '',\n    name: ''\n  }\n\n  this.login = this.login.bind(this)\n  this.logout = this.logout.bind(this)\n}\n\n\n getHashParams() {\n    var hashParams = {};\n    var e, r = /([^&;=]+)=?([^&;]*)/g,\n        q = window.location.hash.substring(1);\n    while ( e = r.exec(q)) {\n       hashParams[e[1]] = decodeURIComponent(e[2]);\n    }\n    return hashParams;\n  }\n\n\n  getUserProfile(){\n    spotifyApi.getMe()\n      .then((response) => {\n        if ((response.images.length === 0)){\n          this.setState ({\n            userId: response.id,\n            profPic: profPic,\n            name: response.display_name\n          })\n        }else{\n          this.setState ({\n            userId: response.id,\n            profPic: response.images[0].url,\n            name: response.display_name\n          })\n        }\n      })\n  }\n\n  componentDidMount(){\n\n    if(this.state.loggedIn){\n      this.getUserProfile()\n    }\n  }\n\n\n generateRandomString(length) {\n    var text = '';\n    var possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n\n    for (var i = 0; i < length; i++) {\n      text += possible.charAt(Math.floor(Math.random() * possible.length));\n    }\n    return text;\n  };\n\n  login() {\n    var stateKey = 'spotify_auth_state';\n\n    var client_id = '69862027b9b54d9eb6f6dd2ae3ed3050'; // Your client id\n    var redirect_uri = 'https://cleanifyapp.com/'; // Your redirect uri\n\n    var state = this.generateRandomString(16);\n\n    localStorage.setItem(stateKey, state);\n    var scope = 'user-read-private user-read-email playlist-read-private playlist-modify-public playlist-modify-private';\n\n    var url = 'https://accounts.spotify.com/authorize';\n    url += '?response_type=token';\n    url += '&client_id=' + encodeURIComponent(client_id);\n    url += '&scope=' + encodeURIComponent(scope);\n    url += '&redirect_uri=' + encodeURIComponent(redirect_uri);\n    url += '&state=' + encodeURIComponent(state);\n\n    window.location = url;\n  };\n\n  logout(){\n    this.setState({\n      loggedIn:false\n    })\n    return <iframe style=\"display: none;\" src=\"https://spotify.com/logout\"></iframe>\n  }\n\n\n\n  render(){\n    const userId = this.state.userId\n\n\n    return (\n\n      <div className=\"App\">\n\n        {\n          this.state.loggedIn ?\n           <div>\n              <div className=\"row profile\">\n                <div className=\"col-4 col-sm-4 col-lg-2 col-md-3\">\n                  <img src= {this.state.profPic} className=\"profPic rounded-circle img-fluid\" alt=\"profile pic\"/>\n                </div>\n                <div className=\"col-8 col-sm-8 col-lg-10 col-md-9 text-left ml-n3\">\n                  <button type=\"button\" class=\"btn btn-danger btn-sm mx-0 float-right\" onClick={this.logout}>Log Out</button>\n                  <h1 className=\"profName\" >{this.state.name}</h1>\n                </div>\n              </div>\n              <Playlists user= {userId}></Playlists>\n            </div>\n          :\n          <div id=\"login\" className=\"pt-5\">\n          <Fade top>\n          <div>\n              <img src={logo} class=\"logo img-fluid text-center\" alt=\"logo\"/>\n              <h1 className=\"logo-title\">Cleanify</h1>\n          </div>\n          </Fade>\n          <Zoom delay={1000}>\n            <div>\n            <button id=\"login-button\" onClick= {this.login} class=\"btn btn-success btn-lg\">Log in with Spotify</button>\n            </div>\n          </Zoom>\n          </div>\n\n        }\n\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}