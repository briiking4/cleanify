{"ast":null,"code":"var _jsxFileName = \"/Users/brianaking/Desktop/cleanify/client/src/App.js\";\nimport React, { Component } from 'react';\nimport profPic from './profPic.png';\nimport logo from './logo.png';\nimport Zoom from 'react-reveal/Zoom';\nimport Fade from 'react-reveal/Fade';\nimport './App.css';\nimport Playlists from './components/Playlists';\nimport SpotifyWebApi from 'spotify-web-api-js';\nimport ReactGA from 'react-ga';\nconst spotifyApi = new SpotifyWebApi();\n\nclass App extends Component {\n  constructor() {\n    super();\n    const params = this.getHashParams();\n    const token = params.access_token;\n\n    if (token) {\n      spotifyApi.setAccessToken(token);\n    }\n\n    ReactGA.initialize('UA-172518785-1');\n    ReactGA.pageview(window.location.pathname);\n    this.state = {\n      userId: '',\n      loggedIn: params.access_token ? true : false,\n      profPic: '',\n      name: ''\n    };\n    this.login = this.login.bind(this);\n    this.logout = this.logout.bind(this);\n  }\n\n  getHashParams() {\n    var hashParams = {};\n    var e,\n        r = /([^&;=]+)=?([^&;]*)/g,\n        q = window.location.hash.substring(1);\n\n    while (e = r.exec(q)) {\n      hashParams[e[1]] = decodeURIComponent(e[2]);\n    }\n\n    return hashParams;\n  }\n\n  getUserProfile() {\n    spotifyApi.getMe().then(response => {\n      if (response.images.length === 0) {\n        this.setState({\n          userId: response.id,\n          profPic: profPic,\n          name: response.display_name\n        });\n      } else {\n        this.setState({\n          userId: response.id,\n          profPic: response.images[0].url,\n          name: response.display_name\n        });\n      }\n    });\n  }\n\n  componentDidMount() {\n    if (this.state.loggedIn) {\n      this.getUserProfile();\n    }\n  }\n\n  generateRandomString(length) {\n    var text = '';\n    var possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n\n    for (var i = 0; i < length; i++) {\n      text += possible.charAt(Math.floor(Math.random() * possible.length));\n    }\n\n    return text;\n  }\n\n  login() {\n    var stateKey = 'spotify_auth_state';\n    var client_id = '69862027b9b54d9eb6f6dd2ae3ed3050'; // Your client id\n\n    var redirect_uri = 'http://localhost:3000'; // Your redirect uri\n\n    var state = this.generateRandomString(16);\n    localStorage.setItem(stateKey, state);\n    var scope = 'user-read-private user-read-email playlist-read-private playlist-modify-public playlist-modify-private';\n    var url = 'https://accounts.spotify.com/authorize';\n    url += '?response_type=token';\n    url += '&client_id=' + encodeURIComponent(client_id);\n    url += '&scope=' + encodeURIComponent(scope);\n    url += '&redirect_uri=' + encodeURIComponent(redirect_uri);\n    url += '&state=' + encodeURIComponent(state);\n    window.location = url;\n  }\n\n  logout() {\n    this.setState({\n      loggedIn: false\n    });\n    window.location.href = \"\";\n  }\n\n  render() {\n    const userId = this.state.userId;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 7\n      }\n    }, this.state.loggedIn ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 12\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row profile\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-4 col-sm-4 col-lg-2 col-md-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: this.state.profPic,\n      className: \"profPic rounded-circle img-fluid\",\n      alt: \"profile pic\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-8 col-sm-8 col-lg-10 col-md-9 text-left ml-n3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-danger btn-sm mx-0 logout float-right\",\n      onClick: this.logout,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 19\n      }\n    }, \"Log Out\"), /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"profName\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 19\n      }\n    }, this.state.name))), /*#__PURE__*/React.createElement(Playlists, {\n      user: userId,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 15\n      }\n    })) : /*#__PURE__*/React.createElement(\"div\", {\n      id: \"login\",\n      className: \"pt-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Fade, {\n      top: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: logo,\n      class: \"logo img-fluid text-center\",\n      alt: \"logo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"logo-title font-weight-bold\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 15\n      }\n    }, \"Cleanify\"))), /*#__PURE__*/React.createElement(Zoom, {\n      delay: 1000,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      id: \"login-button\",\n      href: \"http://localhost:8888\",\n      class: \"btn btn-success\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 13\n      }\n    }, \"Log in with Spotify\")))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/brianaking/Desktop/cleanify/client/src/App.js"],"names":["React","Component","profPic","logo","Zoom","Fade","Playlists","SpotifyWebApi","ReactGA","spotifyApi","App","constructor","params","getHashParams","token","access_token","setAccessToken","initialize","pageview","window","location","pathname","state","userId","loggedIn","name","login","bind","logout","hashParams","e","r","q","hash","substring","exec","decodeURIComponent","getUserProfile","getMe","then","response","images","length","setState","id","display_name","url","componentDidMount","generateRandomString","text","possible","i","charAt","Math","floor","random","stateKey","client_id","redirect_uri","localStorage","setItem","scope","encodeURIComponent","href","render"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport profPic from './profPic.png';\nimport logo from './logo.png'\nimport Zoom from 'react-reveal/Zoom';\nimport Fade from 'react-reveal/Fade';\n\nimport './App.css';\nimport Playlists from './components/Playlists'\nimport SpotifyWebApi from 'spotify-web-api-js';\nimport ReactGA from 'react-ga';\n\n\nconst spotifyApi = new SpotifyWebApi();\n\n\nclass App extends Component {\n\nconstructor (){\n  super();\n  const params = this.getHashParams();\n  const token = params.access_token;\n\n  if (token) {\n     spotifyApi.setAccessToken(token);\n  }\n\n    ReactGA.initialize('UA-172518785-1');\n    ReactGA.pageview(window.location.pathname);\n\n  this.state ={\n    userId: '',\n    loggedIn: params.access_token ? true : false,\n    profPic: '',\n    name: ''\n  }\n\n  this.login = this.login.bind(this)\n  this.logout = this.logout.bind(this)\n}\n\n\n getHashParams() {\n    var hashParams = {};\n    var e, r = /([^&;=]+)=?([^&;]*)/g,\n        q = window.location.hash.substring(1);\n    while ( e = r.exec(q)) {\n       hashParams[e[1]] = decodeURIComponent(e[2]);\n    }\n    return hashParams;\n  }\n\n\n  getUserProfile(){\n    spotifyApi.getMe()\n      .then((response) => {\n        if ((response.images.length === 0)){\n          this.setState ({\n            userId: response.id,\n            profPic: profPic,\n            name: response.display_name\n          })\n        }else{\n          this.setState ({\n            userId: response.id,\n            profPic: response.images[0].url,\n            name: response.display_name\n          })\n        }\n      })\n  }\n\n  componentDidMount(){\n\n    if(this.state.loggedIn){\n      this.getUserProfile()\n    }\n  }\n\n\n generateRandomString(length) {\n    var text = '';\n    var possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n\n    for (var i = 0; i < length; i++) {\n      text += possible.charAt(Math.floor(Math.random() * possible.length));\n    }\n    return text;\n  };\n\n  login() {\n    var stateKey = 'spotify_auth_state';\n\n    var client_id = '69862027b9b54d9eb6f6dd2ae3ed3050'; // Your client id\n    var redirect_uri = 'http://localhost:3000'; // Your redirect uri\n\n    var state = this.generateRandomString(16);\n\n    localStorage.setItem(stateKey, state);\n    var scope = 'user-read-private user-read-email playlist-read-private playlist-modify-public playlist-modify-private';\n\n    var url = 'https://accounts.spotify.com/authorize';\n    url += '?response_type=token';\n    url += '&client_id=' + encodeURIComponent(client_id);\n    url += '&scope=' + encodeURIComponent(scope);\n    url += '&redirect_uri=' + encodeURIComponent(redirect_uri);\n    url += '&state=' + encodeURIComponent(state);\n\n    window.location = url;\n  };\n\n  logout(){\n    this.setState({\n      loggedIn:false\n    })\n    window.location.href = \"\"\n  }\n\n\n\n  render(){\n    const userId = this.state.userId\n\n\n    return (\n\n      <div className=\"App\">\n\n        {\n          this.state.loggedIn ?\n           <div>\n              <div className=\"row profile\">\n                <div className=\"col-4 col-sm-4 col-lg-2 col-md-3\">\n                  <img src= {this.state.profPic} className=\"profPic rounded-circle img-fluid\" alt=\"profile pic\"/>\n                </div>\n                <div className=\"col-8 col-sm-8 col-lg-10 col-md-9 text-left ml-n3\">\n                  <button type=\"button\" className=\"btn btn-danger btn-sm mx-0 logout float-right\" onClick={this.logout}>Log Out</button>\n                  <h1 className=\"profName\" >{this.state.name}</h1>\n                </div>\n              </div>\n              <Playlists user= {userId}></Playlists>\n            </div>\n          :\n          <div id=\"login\" className=\"pt-5\">\n          <Fade top>\n          <div>\n              <img src={logo} class=\"logo img-fluid text-center\" alt=\"logo\"/>\n              <h1 className=\"logo-title font-weight-bold\">Cleanify</h1>\n          </div>\n          </Fade>\n          <Zoom delay={1000}>\n            <div>\n            <a id=\"login-button\" href=\"http://localhost:8888\" class=\"btn btn-success\">Log in with Spotify</a>\n            </div>\n          </Zoom>\n          </div>\n\n        }\n\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}