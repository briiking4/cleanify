{"ast":null,"code":"import _classCallCheck from\"/Users/brianaking/Desktop/cleanify/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/brianaking/Desktop/cleanify/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/brianaking/Desktop/cleanify/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/brianaking/Desktop/cleanify/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import profPic from'./profPic.png';import'./App.css';import Playlists from'./components/Playlists';import SpotifyWebApi from'spotify-web-api-js';var spotifyApi=new SpotifyWebApi();var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);_this=_super.call(this);var params=_this.getHashParams();var token=params.access_token;if(token){spotifyApi.setAccessToken(token);}_this.state={userId:'',loggedIn:params.access_token?true:false,profPic:'',name:''};return _this;}_createClass(App,[{key:\"getHashParams\",value:function getHashParams(){var hashParams={};var e,r=/([^&;=]+)=?([^&;]*)/g,q=window.location.hash.substring(1);while(e=r.exec(q)){hashParams[e[1]]=decodeURIComponent(e[2]);}return hashParams;}},{key:\"getUserProfile\",value:function getUserProfile(){var _this2=this;spotifyApi.getMe().then(function(response){console.log(response);if(response.images.length===0){_this2.setState({userId:response.id,profPic:profPic,name:response.display_name});}else{_this2.setState({userId:response.id,profPic:response.images[0].url,name:response.display_name});}});}},{key:\"componentDidMount\",value:function componentDidMount(){if(this.state.loggedIn){this.getUserProfile();}}},{key:\"render\",value:function render(){var userId=this.state.userId;return/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},this.state.loggedIn&&/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"row profile\"},/*#__PURE__*/React.createElement(\"img\",{src:this.state.profPic,className:\"profPic rounded-circle\",alt:\"profile pic\"}),/*#__PURE__*/React.createElement(\"h1\",{className:\"profName\"},this.state.name)),/*#__PURE__*/React.createElement(Playlists,{user:userId})));}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["/Users/brianaking/Desktop/cleanify/client/src/App.js"],"names":["React","Component","profPic","Playlists","SpotifyWebApi","spotifyApi","App","params","getHashParams","token","access_token","setAccessToken","state","userId","loggedIn","name","hashParams","e","r","q","window","location","hash","substring","exec","decodeURIComponent","getMe","then","response","console","log","images","length","setState","id","display_name","url","getUserProfile"],"mappings":"gnBAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,KAA+B,OAA/B,CACA,MAAOC,CAAAA,OAAP,KAAoB,eAApB,CAEA,MAAO,WAAP,CACA,MAAOC,CAAAA,SAAP,KAAsB,wBAAtB,CAGA,MAAOC,CAAAA,aAAP,KAA0B,oBAA1B,CACA,GAAMC,CAAAA,UAAU,CAAG,GAAID,CAAAA,aAAJ,EAAnB,C,GAEME,CAAAA,G,0FAEN,cAAc,qCACZ,wBACA,GAAMC,CAAAA,MAAM,CAAG,MAAKC,aAAL,EAAf,CACA,GAAMC,CAAAA,KAAK,CAAGF,MAAM,CAACG,YAArB,CAEA,GAAID,KAAJ,CAAW,CACRJ,UAAU,CAACM,cAAX,CAA0BF,KAA1B,EACF,CAED,MAAKG,KAAL,CAAY,CACVC,MAAM,CAAE,EADE,CAEVC,QAAQ,CAAEP,MAAM,CAACG,YAAP,CAAsB,IAAtB,CAA6B,KAF7B,CAGVR,OAAO,CAAE,EAHC,CAIVa,IAAI,CAAE,EAJI,CAAZ,CATY,aAeb,C,qEACgB,CACb,GAAIC,CAAAA,UAAU,CAAG,EAAjB,CACA,GAAIC,CAAAA,CAAJ,CAAOC,CAAC,CAAG,sBAAX,CACIC,CAAC,CAAGC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAqBC,SAArB,CAA+B,CAA/B,CADR,CAEA,MAAQN,CAAC,CAAGC,CAAC,CAACM,IAAF,CAAOL,CAAP,CAAZ,CAAuB,CACpBH,UAAU,CAACC,CAAC,CAAC,CAAD,CAAF,CAAV,CAAmBQ,kBAAkB,CAACR,CAAC,CAAC,CAAD,CAAF,CAArC,CACF,CACD,MAAOD,CAAAA,UAAP,CACD,C,uDAGe,iBACdX,UAAU,CAACqB,KAAX,GACGC,IADH,CACQ,SAACC,QAAD,CAAc,CAClBC,OAAO,CAACC,GAAR,CAAYF,QAAZ,EACA,GAAKA,QAAQ,CAACG,MAAT,CAAgBC,MAAhB,GAA2B,CAAhC,CAAmC,CACjC,MAAI,CAACC,QAAL,CAAe,CACbpB,MAAM,CAAEe,QAAQ,CAACM,EADJ,CAEbhC,OAAO,CAAEA,OAFI,CAGba,IAAI,CAAEa,QAAQ,CAACO,YAHF,CAAf,EAKD,CAND,IAMK,CACH,MAAI,CAACF,QAAL,CAAe,CACbpB,MAAM,CAAEe,QAAQ,CAACM,EADJ,CAEbhC,OAAO,CAAE0B,QAAQ,CAACG,MAAT,CAAgB,CAAhB,EAAmBK,GAFf,CAGbrB,IAAI,CAAEa,QAAQ,CAACO,YAHF,CAAf,EAKD,CACF,CAhBH,EAiBD,C,6DAEkB,CACjB,GAAG,KAAKvB,KAAL,CAAWE,QAAd,CAAuB,CACrB,KAAKuB,cAAL,GACD,CACF,C,uCAIO,CACN,GAAMxB,CAAAA,MAAM,CAAG,KAAKD,KAAL,CAAWC,MAA1B,CAEA,mBAEE,2BAAK,SAAS,CAAC,KAAf,EAGI,KAAKD,KAAL,CAAWE,QAAX,eACC,4CACG,2BAAK,SAAS,CAAC,aAAf,eACE,2BAAK,GAAG,CAAG,KAAKF,KAAL,CAAWV,OAAtB,CAA+B,SAAS,CAAC,wBAAzC,CAAkE,GAAG,CAAC,aAAtE,EADF,cAEE,0BAAI,SAAS,CAAC,UAAd,EAA0B,KAAKU,KAAL,CAAWG,IAArC,CAFF,CADH,cAKG,oBAAC,SAAD,EAAW,IAAI,CAAGF,MAAlB,EALH,CAJL,CAFF,CAmBD,C,iBA/EeZ,S,EAkFlB,cAAeK,CAAAA,GAAf","sourcesContent":["import React, {Component} from 'react';\nimport profPic from './profPic.png';\n\nimport './App.css';\nimport Playlists from './components/Playlists'\n\n\nimport SpotifyWebApi from 'spotify-web-api-js';\nconst spotifyApi = new SpotifyWebApi();\n\nclass App extends Component {\n\nconstructor (){\n  super();\n  const params = this.getHashParams();\n  const token = params.access_token;\n\n  if (token) {\n     spotifyApi.setAccessToken(token);\n  }\n\n  this.state ={\n    userId: '',\n    loggedIn: params.access_token ? true : false,\n    profPic: '',\n    name: ''\n  }\n}\n getHashParams() {\n    var hashParams = {};\n    var e, r = /([^&;=]+)=?([^&;]*)/g,\n        q = window.location.hash.substring(1);\n    while ( e = r.exec(q)) {\n       hashParams[e[1]] = decodeURIComponent(e[2]);\n    }\n    return hashParams;\n  }\n\n\n  getUserProfile(){\n    spotifyApi.getMe()\n      .then((response) => {\n        console.log(response)\n        if ((response.images.length === 0)){\n          this.setState ({\n            userId: response.id,\n            profPic: profPic,\n            name: response.display_name\n          })\n        }else{\n          this.setState ({\n            userId: response.id,\n            profPic: response.images[0].url,\n            name: response.display_name\n          })\n        }\n      })\n  }\n\n  componentDidMount(){\n    if(this.state.loggedIn){\n      this.getUserProfile()\n    }\n  }\n\n\n\n  render(){\n    const userId = this.state.userId\n\n    return (\n\n      <div className=\"App\">\n\n        {\n          this.state.loggedIn &&\n           <div>\n              <div className=\"row profile\">\n                <img src= {this.state.profPic} className=\"profPic rounded-circle\" alt=\"profile pic\"/>\n                <h1 className=\"profName\">{this.state.name}</h1>\n              </div>\n              <Playlists user= {userId}></Playlists>\n            </div>\n\n        }\n\n\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}