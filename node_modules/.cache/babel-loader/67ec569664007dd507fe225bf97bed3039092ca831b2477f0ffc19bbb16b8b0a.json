{"ast":null,"code":"import React,{Component}from'react';import profPic from'./profPic.png';import logo from'./logo.png';import Zoom from'react-reveal/Zoom';import Fade from'react-reveal/Fade';import'./App.css';import Playlists from'./components/Playlists';import SpotifyWebApi from'spotify-web-api-js';import ReactGA from'react-ga';const spotifyApi=new SpotifyWebApi();class App extends Component{constructor(){super();const params=this.getHashParams();const token=params.access_token;if(token){spotifyApi.setAccessToken(token);}ReactGA.initialize('UA-172518785-1');ReactGA.pageview(window.location.pathname);this.state={userId:'',loggedIn:params.access_token?true:false,profPic:'',name:''};this.login=this.login.bind(this);this.logout=this.logout.bind(this);}getHashParams(){var hashParams={};var e,r=/([^&;=]+)=?([^&;]*)/g,q=window.location.hash.substring(1);while(e=r.exec(q)){hashParams[e[1]]=decodeURIComponent(e[2]);}return hashParams;}getUserProfile(){spotifyApi.getMe().then(response=>{if(response.images.length===0){this.setState({userId:response.id,profPic:profPic,name:response.display_name});}else{this.setState({userId:response.id,profPic:response.images[1].url,name:response.display_name});}});}componentDidMount(){if(this.state.loggedIn){this.getUserProfile();}}generateRandomString(length){var text='';var possible='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';for(var i=0;i<length;i++){text+=possible.charAt(Math.floor(Math.random()*possible.length));}return text;}login(){var stateKey='spotify_auth_state';var client_id='69862027b9b54d9eb6f6dd2ae3ed3050';var redirect_uri='https://briiking4.github.io/cleanify/';var state=this.generateRandomString(16);localStorage.setItem(stateKey,state);var scope='user-read-private user-read-email playlist-read-private playlist-modify-public playlist-modify-private';var url='https://accounts.spotify.com/authorize';url+='?response_type=token';url+='&client_id='+encodeURIComponent(client_id);url+='&scope='+encodeURIComponent(scope);url+='&redirect_uri='+encodeURIComponent(redirect_uri);url+='&state='+encodeURIComponent(state);window.location=url;}logout(){this.setState({loggedIn:false});window.location.href=\"\";}render(){const userId=this.state.userId;return/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},this.state.loggedIn?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"row profile\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-4 col-sm-4 col-lg-1 col-md-3\"},/*#__PURE__*/React.createElement(\"img\",{src:this.state.profPic,className:\"profPic rounded-circle img-fluid\",alt:\"profile pic\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-8 col-sm-8 col-lg-11 col-md-9 text-left ml-n3\"},/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"btn btn-danger btn-sm mx-0 logout float-right\",onClick:this.logout},\"Log Out\"),/*#__PURE__*/React.createElement(\"h1\",{className:\"profName\"},this.state.name))),/*#__PURE__*/React.createElement(Playlists,{user:userId})):/*#__PURE__*/React.createElement(\"div\",{id:\"login\",className:\"pt-5\"},/*#__PURE__*/React.createElement(Fade,{top:true},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"img\",{src:logo,class:\"logo img-fluid text-center\",alt:\"logo\"}),/*#__PURE__*/React.createElement(\"h1\",{className:\"logo-title font-weight-bold\"},\"Cleanify\"))),/*#__PURE__*/React.createElement(Zoom,{delay:1000},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"button\",{id:\"login-button\",onClick:this.login,class:\"btn btn-success\"},\"Log in with Spotify\")))));}}export default App;","map":{"version":3,"names":["React","Component","profPic","logo","Zoom","Fade","Playlists","SpotifyWebApi","ReactGA","spotifyApi","App","constructor","params","getHashParams","token","access_token","setAccessToken","initialize","pageview","window","location","pathname","state","userId","loggedIn","name","login","bind","logout","hashParams","e","r","q","hash","substring","exec","decodeURIComponent","getUserProfile","getMe","then","response","images","length","setState","id","display_name","url","componentDidMount","generateRandomString","text","possible","i","charAt","Math","floor","random","stateKey","client_id","redirect_uri","localStorage","setItem","scope","encodeURIComponent","href","render","createElement","className","src","alt","type","onClick","user","top","class","delay"],"sources":["/Users/brianaking/cleanify/src/App.js"],"sourcesContent":["import React, {Component} from 'react';\nimport profPic from './profPic.png';\nimport logo from './logo.png'\nimport Zoom from 'react-reveal/Zoom';\nimport Fade from 'react-reveal/Fade';\n\nimport './App.css';\nimport Playlists from './components/Playlists'\nimport SpotifyWebApi from 'spotify-web-api-js';\nimport ReactGA from 'react-ga';\n\n\nconst spotifyApi = new SpotifyWebApi();\n\n\nclass App extends Component {\n\nconstructor (){\n  super();\n  const params = this.getHashParams();\n  const token = params.access_token;\n\n  if (token) {\n     spotifyApi.setAccessToken(token);\n  }\n\n    ReactGA.initialize('UA-172518785-1');\n    ReactGA.pageview(window.location.pathname);\n\n  this.state ={\n    userId: '',\n    loggedIn: params.access_token ? true : false,\n    profPic: '',\n    name: ''\n  }\n\n  this.login = this.login.bind(this)\n  this.logout = this.logout.bind(this)\n}\n\n\n getHashParams() {\n    var hashParams = {};\n    var e, r = /([^&;=]+)=?([^&;]*)/g,\n        q = window.location.hash.substring(1);\n    while ( e = r.exec(q)) {\n       hashParams[e[1]] = decodeURIComponent(e[2]);\n    }\n    return hashParams;\n  }\n\n\n  getUserProfile(){\n    spotifyApi.getMe()\n      .then((response) => {\n        if ((response.images.length === 0)){\n          this.setState ({\n            userId: response.id,\n            profPic: profPic,\n            name: response.display_name\n          })\n        }else{\n          this.setState ({\n            userId: response.id,\n            profPic: response.images[1].url,\n            name: response.display_name\n          })\n        }\n      })\n  }\n\n  componentDidMount(){\n\n    if(this.state.loggedIn){\n      this.getUserProfile()\n    }\n  }\n\n\n generateRandomString(length) {\n    var text = '';\n    var possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n\n    for (var i = 0; i < length; i++) {\n      text += possible.charAt(Math.floor(Math.random() * possible.length));\n    }\n    return text;\n  };\n\n  login() {\n    var stateKey = 'spotify_auth_state';\n\n    var client_id = '69862027b9b54d9eb6f6dd2ae3ed3050'; \n    var redirect_uri = 'https://briiking4.github.io/cleanify/'; \n\n    var state = this.generateRandomString(16);\n\n    localStorage.setItem(stateKey, state);\n    var scope = 'user-read-private user-read-email playlist-read-private playlist-modify-public playlist-modify-private';\n\n    var url = 'https://accounts.spotify.com/authorize';\n    url += '?response_type=token';\n    url += '&client_id=' + encodeURIComponent(client_id);\n    url += '&scope=' + encodeURIComponent(scope);\n    url += '&redirect_uri=' + encodeURIComponent(redirect_uri);\n    url += '&state=' + encodeURIComponent(state);\n\n    window.location = url;\n  };\n\n  logout(){\n    this.setState({\n      loggedIn:false\n    })\n    window.location.href = \"\"\n  }\n\n\n\n  render(){\n    const userId = this.state.userId\n\n\n    return (\n\n      <div className=\"App\">\n\n        {\n          this.state.loggedIn ?\n           <div>\n              <div className=\"row profile\">\n                <div className=\"col-4 col-sm-4 col-lg-1 col-md-3\">\n                  <img src= {this.state.profPic} className=\"profPic rounded-circle img-fluid\" alt=\"profile pic\"/>\n                </div>\n                <div className=\"col-8 col-sm-8 col-lg-11 col-md-9 text-left ml-n3\">\n                  <button type=\"button\" className=\"btn btn-danger btn-sm mx-0 logout float-right\" onClick={this.logout}>Log Out</button>\n                  <h1 className=\"profName\" >{this.state.name}</h1>\n                </div>\n              </div>\n              <Playlists user= {userId}></Playlists>\n            </div>\n          :\n          <div id=\"login\" className=\"pt-5\">\n          <Fade top>\n          <div>\n              <img src={logo} class=\"logo img-fluid text-center\" alt=\"logo\"/>\n              <h1 className=\"logo-title font-weight-bold\">Cleanify</h1>\n          </div>\n          </Fade>\n          <Zoom delay={1000}>\n            <div>\n            <button id=\"login-button\" onClick= {this.login} class=\"btn btn-success\">Log in with Spotify</button>\n            </div>\n          </Zoom>\n          </div>\n\n        }\n\n      </div>\n    );\n  }\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}