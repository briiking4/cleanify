{"version":3,"sources":["profPic.png","components/CleanPlaylist.js","components/Playlists.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","spotifyApi","SpotifyWebApi","CleanPlaylist","props","state","userId","user","playlistName","name","playlistId","data","ownerId","buttonPressed","loadingData","newPlaylistId","revealUnable","explicitTracks","cleanTracks","noCleanVersions","recTracks","timesClicked","openPlaylist","makeCleanPlaylist","bind","findCleanTrack","getRecommended","unableToAdd","addTrack","owner","id","explicitTracksList","cleanTracksList","getPlaylistTracks","then","response","items","map","item","track","explicit","push","this","getTracksData","artist","artists","counter","search","searchResult","tracks","itemC","includes","cleanTrack","setState","itemE","length","trackUri","newId","x","uri","createPlaylist","playlistResult","external_urls","spotify","addTracksToPlaylist","trackId","tracksList","slice","splice","getRecommendations","limit","seed_tracks","recommededResult","itemR","unavalible","index","key","recommendedTracks","className","type","onClick","src","width","height","frameBorder","allowtransparency","allow","title","href","target","disabled","class","React","Component","Playlists","playlistIsSelected","event","currentPlaylistId","getAttribute","playlistOwnerId","playlistSelected","currentSelected","playlistList","playlistItems","getUserPlaylists","onRejected","images","url","image","getPlaylistData","selected","showPlaylist","playlist","alt","App","params","getHashParams","token","access_token","setAccessToken","loggedIn","profPic","e","hashParams","r","q","window","location","hash","substring","exec","decodeURIComponent","getMe","console","log","display_name","getUserProfile","Boolean","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.48491214.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/profPic.cc02a310.png\";","import React from 'react';\nimport './CleanPlaylist.css';\nimport SpotifyWebApi from 'spotify-web-api-js';\nconst spotifyApi = new SpotifyWebApi();\n\nclass CleanPlaylist extends React.Component{\n  constructor(props){\n    super(props);\n    this.state = {\n      userId: this.props.user,\n      playlistName: this.props.name,\n      playlistId: this.props.data,\n      ownerId: '',\n      buttonPressed: false,\n      loadingData: false,\n      newPlaylistId: '',\n      revealUnable: false\n    };\n    this.explicitTracks = [];\n    this.cleanTracks = [];\n    this.noCleanVersions = [];\n    this.recTracks = [];\n    this.timesClicked = 1;\n    this.openPlaylist = \"\";\n    this.makeCleanPlaylist = this.makeCleanPlaylist.bind(this)\n    this.findCleanTrack = this.findCleanTrack.bind(this)\n    this.getRecommended = this.getRecommended.bind(this)\n    this.unableToAdd = this.unableToAdd.bind(this)\n    this.addTrack = this.addTrack.bind(this)\n\n\n\n  }\n\n  getTracksData(owner, id){\n    var explicitTracksList = []\n    var cleanTracksList = []\n    spotifyApi.getPlaylistTracks(owner, id)\n      .then((response) => {\n        // console.log(response)\n\n        response.items.map((item) =>{\n          if(item.track.explicit === true){\n            explicitTracksList.push(item.track)\n          }else{\n            cleanTracksList.push(item.track)\n          }\n        })\n      })\n      this.explicitTracks = explicitTracksList\n      this.cleanTracks = cleanTracksList\n\n\n    }\n\n    componentDidMount(){\n      var playlistId = this.props.data\n      var ownerId = this.props.id\n      this.getTracksData(ownerId, playlistId)\n    }\n\n    async findCleanTrack(track){\n      var name = track.name\n      var artist = track.artists[0].name\n      var cleanTrack;\n      var itemC;\n      var counter = 0;\n        let searchResult = await spotifyApi.search('track:'+ '\"' +name+ '\"' + ' artist:'+ '\"'+ artist + '\"' ,['track'])\n        // console.log(searchResult)\n        for (itemC of searchResult.tracks.items){\n          if (itemC.explicit === false){\n            if((itemC.name === name || itemC.name.includes(\"Clean\")) && (itemC.artists[0].name === artist && counter <= 0) ){\n              cleanTrack = itemC\n              counter ++\n            }\n          }\n        }\n        if (counter === 0 ){\n          cleanTrack = null\n        }\n\n        return cleanTrack\n    }\n\n    async makeCleanPlaylist(){\n\n      this.setState({\n        loadingData: true\n      })\n\n      var itemE;\n      for (itemE of this.explicitTracks) {\n        let cleanTrack = await this.findCleanTrack(itemE)\n        // console.log(cleanTrack)\n        if (cleanTrack === null){\n          // console.log(\"couldn't add: \" + itemE.name)\n          this.noCleanVersions.push(itemE)\n        }else{\n          this.cleanTracks.push(cleanTrack)\n          // console.log(\" ADDED: \" + cleanTrack.name)\n        }\n      }\n\n      if (this.noCleanVersions.length > 0){\n        this.recTracks = await this.getRecommended(this.noCleanVersions)\n        // console.log(this.recTracks)\n\n      }\n\n\n\n       var trackUri = [];\n       var newId = '';\n       var x;\n       for (x of this.cleanTracks){\n         trackUri.push(x.uri)\n       }\n        let playlistResult = await spotifyApi.createPlaylist(this.state.userId, {name: this.state.playlistName + \"(Clean)\"})\n        // console.log(playlistResult)\n        this.openPlaylist = playlistResult.external_urls.spotify\n        newId = playlistResult.id\n\n        let addResult = await spotifyApi.addTracksToPlaylist(this.state.userId, newId, trackUri)\n        // console.log(addResult)\n\n        this.setState({\n          newPlaylistId: newId,\n          buttonPressed: true\n        })\n\n    }\n\n    async getRecommended(tracks){\n      var trackId = [];\n      var tracksList = tracks.slice();\n      var recTracks =[];\n\n      if (tracks.length > 5){\n        tracksList.splice(5,tracks.length)\n      }\n\n      tracksList.map((item) => {\n        trackId.push(item.id)\n      })\n\n      let recommededResult = await spotifyApi.getRecommendations({limit: 20, seed_tracks: trackId})\n      // console.log(recommededResult)\n      var itemR;\n\n        for (itemR of recommededResult.tracks) {\n          if (itemR.explicit === true){\n            let cleanTrack = await this.findCleanTrack(itemR)\n              // console.log(cleanTrack)\n            if (cleanTrack === null){\n              // console.log(\"couldn't add rec\")\n            }else{\n              recTracks.push(itemR)\n            }\n          }else{\n            recTracks.push(itemR)\n          }\n        }\n        if (recTracks.length > 10){\n          recTracks = recTracks.slice(0,10)\n        }\n\n      return recTracks\n    }\n\n   unableToAdd(){\n     this.timesClicked ++\n     if (this.timesClicked % 2 === 0){\n       this.setState({\n         revealUnable: true\n       })\n     }else{\n       this.setState({\n         revealUnable: false\n       })\n     }\n    }\n\n     async addTrack(uri){\n      let addResult = await spotifyApi.addTracksToPlaylist(this.state.userId, this.state.newPlaylistId, [uri])\n      // console.log(addResult)\n    }\n\n  render(){\n\n    const unavalible =\n    this.noCleanVersions.map(function(item, index) {\n      index++\n      return (\n        <p key={item.id}> {index}. {item.name}</p>\n      )\n    });\n\n\n    const recommendedTracks =\n    this.recTracks.map(function(item) {\n      return (\n        <div key= {item.id}>\n        <div className=\"row my-2\">\n          <div className=\"col\">\n            <button type=\"button\" className=\"btn btn-add\" onClick={() => this.addTrack(item.uri)}> ADD </button>\n          </div>\n          <div className=\"col-10\">\n            <iframe src= {\"https://open.spotify.com/embed/track/\" + item.id } width=\"90%\" height=\"80\" frameBorder=\"0\" allowtransparency=\"true\" allow=\"encrypted-media\" title=\"embeded-track\"></iframe>\n          </div>\n        </div>\n        </div>\n      )\n    }, this);\n\n\n\n    return(\n      <div className= \"Clean\">\n\n      {\n        this.state.buttonPressed ?\n        <div className= \"mx-auto\">\n          <h3 className=\"font-weight-bold text-success\"> Your Playlist Is Cleanified! </h3>\n          <p> You're done! We have already saved it to your library!</p>\n            <a href= {this.openPlaylist} target=\"_blank\" className=\"btn btn-success\"> Open In Spotify </a>\n          <div className=\"row\">\n            <div className=\"col\">\n              <iframe src= {\"https://open.spotify.com/embed/playlist/\" + this.state.playlistId} width=\"80%\" height=\"400\" frameBorder=\"0\" allowtransparency=\"true\" allow=\"encrypted-media\" title=\"embeded-playlist\"></iframe>\n            </div>\n            <i className=\"fas fa-arrow-right text-success fa-2x\"></i>\n            <div className=\"col\">\n              <iframe src= {\"https://open.spotify.com/embed/playlist/\" + this.state.newPlaylistId} width=\"80%\" height=\"400\" frameBorder=\"0\" allowtransparency=\"true\" allow=\"encrypted-media\" title=\"embeded-playlist\"></iframe>\n            </div>\n\n          </div>\n          <hr className=\"divider mb-5\"/>\n\n          <div>\n            <button type=\"button\" className=\"btn btn-danger\" onClick={this.unableToAdd}> Reveal Songs Unable to be Cleaned: {this.noCleanVersions.length}</button>\n            {\n              this.state.revealUnable && this.noCleanVersions.length > 0 ?\n                unavalible\n              :\n              this.state.revealUnable &&\n               <p>Good News! We were able to find clean versions of each song!</p>\n            }\n            {\n              this.noCleanVersions.length > 0 &&\n              <div>\n              <hr className=\"divider mt-5\"/>\n              <h2>Recommended Clean Songs</h2>\n              <p>Based on the songs we were unable to add: </p>\n\n                {recommendedTracks}\n              </div>\n            }\n\n\n          </div>\n\n        </div>\n        :\n          <div>\n          <button type=\"button\" className=\"btn btn-lg btn-success\" onClick= {this.makeCleanPlaylist} disabled={this.state.loadingData}>\n          { this.state.loadingData &&\n            <i class=\"fa fa-compact-disc fa-spin text-white\"></i>\n          }\n          Clean Playlist\n          </button>\n\n          <div>\n            <iframe src= {\"https://open.spotify.com/embed/playlist/\" + this.state.playlistId} width=\"80%\" height=\"500\" frameBorder=\"0\" allowtransparency=\"true\" allow=\"encrypted-media\" title=\"embeded-playlist\"></iframe>\n          </div>\n          <p className=\"text-muted\"> Note: Spotify's explicit content tags are applied based on information Spotify receives from rights-holders. They can’t guarantee all explicit content is marked as such.</p>\n          </div>\n      }\n\n      </div>\n    )\n  }\n}\n\nexport default CleanPlaylist\n","import React from 'react';\nimport CleanPlaylist from './CleanPlaylist'\nimport './Playlists.css';\nimport SpotifyWebApi from 'spotify-web-api-js';\nconst spotifyApi = new SpotifyWebApi();\n\nclass Playlists extends React.Component{\n\n  constructor(props){\n    super(props);\n    this.state = {\n      ownerId: '',\n      playlistList: [],\n      playlistSelected: false,\n      currentSelected: '',\n      playlistName: ''\n    };\n  }\n\n  getPlaylistData(){\n    var playlistItems= [];\n\n      spotifyApi.getUserPlaylists({limit:50})\n         .then((response, onRejected) => {\n             response.items.map((item) => {\n               if (item.images.length === 0){\n                 item.images.push({url: \"https://i.ya-webdesign.com/images/notes-grey-icons-png-2.png\"})\n               }\n               playlistItems.push({ownerId: item.owner.id, id: item.id, name:item.name, image: item.images[0].url})\n               return playlistItems\n             })\n            this.setState({\n              playlistList: playlistItems\n            })\n         });\n\n   }\n\n   componentDidMount(){\n     this.getPlaylistData()\n   }\n\n   playlistIsSelected = (event) => {\n\n     var currentPlaylistId = event.target.getAttribute(\"id\")\n     var playlistOwnerId = event.target.getAttribute(\"owner\")\n     var playlistName = event.target.getAttribute(\"name\")\n     this.setState({\n       playlistSelected: true,\n       currentSelected: currentPlaylistId,\n       ownerId: playlistOwnerId,\n       playlistName: playlistName\n     });\n\n   }\n\n\n  render(){\n    const userId = this.props.user\n    const playlistId = this.state.currentSelected\n    const ownerId = this.state.ownerId\n\n    const selected = this.playlistIsSelected\n\n    const showPlaylist =\n      this.state.playlistList.map(function(playlist){\n        return (\n          <div key={playlist.id} className=\"col-sm-6 col-md-4 col-lg-3 col-12 card\">\n             <img src={playlist.image} id= {playlist.id} name= {playlist.name} owner = {playlist.ownerId} onClick={selected} className=\"card-img card-img-top\" alt=\"card\"/>\n             <div className=\"card-body\">\n               <p className=\"card-text font-weight-bold\">{playlist.name}</p>\n             </div>\n          </div>\n           )\n      });\n\n\n    return (\n      <div className=\"Playlist\">\n\n      {\n        this.state.playlistSelected ?\n        <div>\n          <CleanPlaylist name= {this.state.playlistName} id= {ownerId} data= {playlistId} user= {userId}></CleanPlaylist>\n        </div>\n        : <div className=\"user-playlists\">\n            <h3 className=\"font-weight-bold\">Playlists</h3>\n            <h3 className=\"h5 text-weight-bold text-success\"> Select a Playlist to Clean</h3>\n            <p className=\" text-muted\"> Don't worry! We will not alter your original playlist.</p>\n            <p className=\" text-muted\"> Can't find it? Make sure you either own or follow the playlist. If so, open Spotify and move it to the top of your list!</p>\n            <hr className=\"divider mb-5\"/>\n            <div className=\"row\">\n              {showPlaylist}\n              </div>\n          </div>\n      }\n      </div>\n\n    );\n  }\n}\n\n\nexport default Playlists\n","import React, {Component} from 'react';\nimport profPic from './profPic.png';\n\nimport './App.css';\nimport Playlists from './components/Playlists'\n\n\nimport SpotifyWebApi from 'spotify-web-api-js';\nconst spotifyApi = new SpotifyWebApi();\n\nclass App extends Component {\n\nconstructor (){\n  super();\n  const params = this.getHashParams();\n  const token = params.access_token;\n\n  if (token) {\n     spotifyApi.setAccessToken(token);\n  }\n\n  this.state ={\n    userId: '',\n    loggedIn: params.access_token ? true : false,\n    profPic: '',\n    name: ''\n  }\n}\n getHashParams() {\n    var hashParams = {};\n    var e, r = /([^&;=]+)=?([^&;]*)/g,\n        q = window.location.hash.substring(1);\n    while ( e = r.exec(q)) {\n       hashParams[e[1]] = decodeURIComponent(e[2]);\n    }\n    return hashParams;\n  }\n\n\n  getUserProfile(){\n    spotifyApi.getMe()\n      .then((response) => {\n        console.log(response)\n        if ((response.images.length === 0)){\n          this.setState ({\n            userId: response.id,\n            profPic: profPic,\n            name: response.display_name\n          })\n        }else{\n          this.setState ({\n            userId: response.id,\n            profPic: response.images[0].url,\n            name: response.display_name\n          })\n        }\n      })\n  }\n\n  componentDidMount(){\n    if(this.state.loggedIn){\n      this.getUserProfile()\n    }\n  }\n\n\n\n  render(){\n    const userId = this.state.userId\n\n    return (\n\n      <div className=\"App\">\n\n        {\n          this.state.loggedIn &&\n           <div>\n              <div className=\"row profile\">\n                <img src= {this.state.profPic} className=\"profPic rounded-circle\" alt=\"profile pic\"/>\n                <h1 className=\"profName\">{this.state.name}</h1>\n              </div>\n              <Playlists user= {userId}></Playlists>\n            </div>\n\n        }\n\n\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}